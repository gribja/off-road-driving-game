var colOffset=-HALF_COLUMN_WIDTH,scrollSpeed=20,scrollAccel=0,newHeight=STARTING_HEIGHT;function update(){((colOffset+=scrollSpeed+scrollAccel)>=COLUMN_WIDTH&&(colOffset-=COLUMN_WIDTH,colEnd=colBegin,colBegin=colBegin.next,colEnd.danger=doDanger?nextDanger:NO_DANGER),pointer.dragging)&&(getColumn(pointer.x).height=newHeight);updatePlayer()}var then=-1,t=0;function mainloop(e){for(requestAnimationFrame(mainloop),pointer.dragging&&(newHeight=clamp(CANVAS_HEIGTH-pointer.y,20,CANVAS_HEIGTH-60)),-1==then&&(then=e),t+=.001*(e-then),then=e;0<t;)t-=T,update();paint(e,t/T+1)}